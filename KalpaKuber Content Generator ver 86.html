<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KalpaKuber v48.6 | Complete 10 Templates + All Features</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
   
        <link rel="stylesheet" href="styles-core.css">
    <link rel="stylesheet" href="templates.css">
</head>
<body>
<button class="ui-toggle" onclick="toggleUI()" aria-label="Toggle controls">Show/Hide Controls</button>
<div class="version-badge" id="versionBadge" aria-label="Version"></div>
<div class="controls-container">
    <div class="controls" id="ui">
        <div class="input-group basic-only">
            <label>UI Mode</label>
            <select id="uiMode" onchange="setUiMode(this.value)">
                <option value="basic" selected>Basic</option>
                <option value="advanced">Advanced</option>
            </select>
        </div>
        <div class="control-sep">üé® QUICK APPLY: 10 MASTER TEMPLATES</div>
        <div class="template-preview-grid" style="grid-column: 1 / -1;">
            <div class="template-thumb" onclick="applyQuickTemplate(1)" id="quick-temp-1">
                <div style="font-weight:900; margin-bottom:5px;">1. STANDARD</div>
                <div>Full content</div>
                <div class="template-desc">Classic layout with headline, subheadline & body</div>
                <span class="tooltip">Best for: general purpose posts</span>
            </div>
            <div class="template-thumb" onclick="applyQuickTemplate(2)" id="quick-temp-2">
                <div style="font-weight:900; margin-bottom:5px;">2. QUOTE</div>
                <div>Hero quote</div>
                <div class="template-desc">Large centered italic quote style</div>
                <span class="tooltip">Best for: motivational / key message cards</span>
            </div>
            <div class="template-thumb" onclick="applyQuickTemplate(3)" id="quick-temp-3">
                <div style="font-weight:900; margin-bottom:5px;">3. MINIMAL</div>
                <div>No subhead</div>
                <div class="template-desc">Very clean ‚Äì headline + body only</div>
                <span class="tooltip">Best for: elegant & short messages</span>
            </div>
            <div class="template-thumb" onclick="applyQuickTemplate(4)" id="quick-temp-4">
                <div style="font-weight:900; margin-bottom:5px;">4. IMAGE</div>
                <div>Picture focus</div>
                <div class="template-desc">Large visual area beside text</div>
                <span class="tooltip">Best for: before/after, charts, products</span>
            </div>
            <div class="template-thumb" onclick="applyQuickTemplate(5)" id="quick-temp-5">
                <div style="font-weight:900; margin-bottom:5px;">5. BIG NUMBER</div>
                <div>Data impact</div>
                <div class="template-desc">Huge centered number + explanation</div>
                <span class="tooltip">Best for: statistics & key metrics</span>
            </div>
            <div class="template-thumb" onclick="applyQuickTemplate(6)" id="quick-temp-6">
                <div style="font-weight:900; margin-bottom:5px;">6. STATS GRID</div>
                <div>2x2 layout</div>
                <div class="template-desc">Four key stats in grid format</div>
                <span class="tooltip">Best for: comparison & bullet data</span>
            </div>
            <div class="template-thumb" onclick="applyQuickTemplate(7)" id="quick-temp-7">
                <div style="font-weight:900; margin-bottom:5px;">7. TIMELINE</div>
                <div>Vertical flow</div>
                <div class="template-desc">Step-by-step vertical timeline style</div>
                <span class="tooltip">Best for: processes & journeys</span>
            </div>
            <div class="template-thumb" onclick="applyQuickTemplate(8)" id="quick-temp-8">
                <div style="font-weight:900; margin-bottom:5px;">8. SPLIT</div>
                <div>Two columns</div>
                <div class="template-desc">Left-right content split</div>
                <span class="tooltip">Best for: before/after or pros/cons</span>
            </div>
            <div class="template-thumb" onclick="applyQuickTemplate(9)" id="quick-temp-9">
                <div style="font-weight:900; margin-bottom:5px;">9. CENTERED</div>
                <div>All centered</div>
                <div class="template-desc">Perfectly symmetrical centered layout</div>
                <span class="tooltip">Best for: announcements & strong statements</span>
            </div>
            <div class="template-thumb" onclick="applyQuickTemplate(10)" id="quick-temp-10">
                <div style="font-weight:900; margin-bottom:5px;">10. EDITORIAL</div>
                <div>2-col text</div>
                <div class="template-desc">Newspaper-style multi-column body</div>
                <span class="tooltip">Best for: longer explanatory content</span>
            </div>
        </div>
       
        <div class="control-sep">‚≠ê BRAND KIT & PDF EXPORT</div>
        <div class="input-group">
            <label>Current Kit (10 Themes)</label>
            <select id="brandKitSelect" onchange="loadBrandKit()">
                <option value="default">KalpaKuber Gold (Active)</option>
                <option value="silver">Royal Silver Elite</option>
                <option value="deep_ocean">Deep Ocean Pro</option>
                <option value="vedic">Vedic Emerald & Earth</option>
                <option value="ruby">High-Impact Ruby</option>
                <option value="minimal">Executive Ivory (Light)</option>
                <option value="copper">Antique Copper Heritage</option>
                <option value="slate">Modern Slate Tech</option>
                <option value="rose">Rose Gold Wealth</option>
                <option value="neon">Obsidian Neon Focus</option>
            </select>
        </div>
        <div class="input-group">
            <label>Master Template (Quick Fill)</label>
            <select id="templateMaster" onchange="applyTemplate()">
                <option value="">-- Choose Template --</option>
                <option value="investment_table">Investment Table Comparison</option>
                <option value="behavioral_leak">Behavioral Leak Hook</option>
                <option value="impact_quote">High Impact Quote</option>
                <option value="verdict_demo">Verdict: Old vs KalpaKuber</option>
            </select>
        </div>
        <button class="p-btn" style="background:#2563eb; color:white; grid-column: span 1;" onclick="exportAllPDF(this)">Download Full Deck (PDF)</button>
        <div class="input-group">
            <label>Export Quality (Scale)</label>
            <select id="exportQuality" onchange="saveState()">
                <option value="2">Standard (2x)</option>
                <option value="3" selected>High (3x)</option>
                <option value="4">Ultra (4x)</option>
            </select>
        </div>
        <div class="input-group">
            <label>Export-Only Mode</label>
            <select id="exportOnlyMode" onchange="toggleExportOnlyMode()">
                <option value="off" selected>Off</option>
                <option value="on">On (Hide UI Overlays)</option>
            </select>
        </div>
        <button class="p-btn" style="background:#c5a059; color:black; grid-column: span 1;" onclick="harmonizeColors()">Harmonize Colors</button>
        <div class="control-sep">üöÄ MODULAR LAYOUT & SAFE ZONES</div>
        <div class="input-group">
            <label>UI Safe Zone (Overlay)</label>
            <button class="p-btn" onclick="toggleSafeZone()">Toggle Red Overlay</button>
        </div>
        <div class="input-group">
            <label>Visible Dividers</label>
            <div style="font-size:0.7rem;">
                <input type="checkbox" id="line1" checked onchange="debounceRender()"> Top
                <input type="checkbox" id="line2" checked onchange="debounceRender()"> Mid
                <input type="checkbox" id="line3" checked onchange="debounceRender()"> Body
                <input type="checkbox" id="line4" checked onchange="debounceRender()"> Bottom
            </div>
        </div>
        <div class="control-sep">üìê DUAL-TONE SEPARATOR ENGINE</div>
        <div class="input-group">
            <label>Divider Mode</label>
            <select id="inSepMode" onchange="debounceRender()">
                <option value="gradient">Legacy Gradient</option>
                <option value="dual">Dual-Tone (Switch Phase)</option>
            </select>
        </div>
        <div class="input-group"><label>Sep Color 1</label><input type="color" id="inSepColor1" value="#c5a059" oninput="debounceRender()"></div>
        <div class="input-group"><label>Sep Color 2</label><input type="color" id="inSepColor2" value="#ffffff" oninput="debounceRender()"></div>
        <div class="input-group"><label>Sep Thickness (px)</label><input type="number" id="inSepThick" value="4" oninput="debounceRender()"></div>
        <div class="input-group"><label>Sep Width (%)</label><input type="number" id="inSepWidth" value="100" oninput="debounceRender()"></div>
        <div class="control-sep">1. PLATFORM & COMPLIANCE</div>
        <div class="input-group">
            <label>Ecosystem Aspect Ratio</label>
            <select id="inPlatform" onchange="applyPlatform()">
                <option value="insta_port">Instagram Carousel (4:5)</option>
                <option value="whatsapp">WhatsApp/Story (9:16) [Safe Mode]</option>
                <option value="twitter">Twitter/Reddit (16:9 Landscape)</option>
                <option value="linkedin">LinkedIn/FB (Square 1:1)</option>
            </select>
        </div>
        <div class="input-group">
            <label>Global Logo Position</label>
            <select id="inLogoPos" onchange="debounceRender()">
                <option value="top-left">Top Left</option>
                <option value="top-center">Top Center</option>
                <option value="top-right" selected>Top Right</option>
                <option value="bottom-left">Bottom Left</option>
                <option value="bottom-right">Bottom Right</option>
                <option value="bottom-center">Bottom Center</option>
            </select>
        </div>
        <div class="input-group">
            <label>Logo Scale (0.5 - 2.0)</label>
            <input type="number" id="inLogoScale" value="1.0" step="0.1" oninput="debounceRender()">
        </div>
        <div class="input-group" style="background: rgba(197, 160, 89, 0.1); padding: 8px; border-radius: 4px;">
            <label>‚¨ÜÔ∏è Heading Top Spacing (Pull Up/Down)</label>
            <input type="number" id="inHeadingTopSpacing" value="0" step="10" oninput="debounceRender()">
            <small style="font-size:0.5rem; color:#888;">Negative = Pull up, Positive = Push down</small>
        </div>
        <div class="input-group" style="background: rgba(197, 160, 89, 0.1); padding: 8px; border-radius: 4px;">
            <label>‚¨áÔ∏è Heading Bottom Spacing (Pull Up/Down)</label>
            <input type="number" id="inHeadingBottomSpacing" value="0" step="10" oninput="debounceRender()">
            <small style="font-size:0.5rem; color:#888;">Negative = Pull up, Positive = Push down</small>
        </div>
        <div class="input-group">
            <label>Trust Badge Color</label>
            <input type="color" id="inTrustColor" value="#c5a059" oninput="debounceRender()"></div>
        <div class="input-group">
            <label>Trust Badge Status</label>
            <select id="inTrust" onchange="debounceRender()">
                <option value="show">On (ARN 314916)</option>
                <option value="none">Off</option>
            </select>
        </div>
        <div class="control-sep">2. DUAL BORDERS, COLORS, CORNERS & RAILS</div>
        <div class="input-group"><label>Border/Frame Color 1</label><input type="color" id="inLineColor" value="#c5a059" oninput="debounceRender()"></div>
        <div class="input-group"><label>Border/Frame Color 2</label><input type="color" id="inLineColor2" value="#f3e5ab" oninput="debounceRender()"></div>
        <div class="input-group"><label>Main Border Width</label><input type="number" id="inBorderW" value="30" oninput="debounceRender()"></div>
        <div class="input-group"><label>Inner Line Width</label><input type="number" id="inLineW" value="2" oninput="debounceRender()"></div>
        <div class="input-group"><label>Corner Accent Color</label><input type="color" id="inCornerColor" value="#ffffff" oninput="debounceRender()"></div>
        <div class="input-group"><label>Corner Weight (px)</label><input type="number" id="inCornerWeight" value="6" oninput="debounceRender()"></div>
        <div class="input-group"><label>Vertical Rail Color</label><input type="color" id="inSideLineColor" value="#c5a059" oninput="debounceRender()"></div>
        <div class="input-group"><label>Vertical Rail Width (px)</label><input type="number" id="inSideLineWidth" value="2" oninput="debounceRender()"></div>
        <div class="input-group"><label>Horizontal Rail Color</label><input type="color" id="inHorizLineColor" value="#c5a059" oninput="debounceRender()"></div>
        <div class="input-group"><label>Horizontal Rail Height (px)</label><input type="number" id="inHorizLineHeight" value="2" oninput="debounceRender()"></div>
        <div class="control-sep">3. TYPOGRAPHY (10 OFFLINE FONTS)</div>
        <div class="input-group">
            <label>Body Font Stack</label>
            <select id="fB_Stack" onchange="debounceRender()">
                <option value="'Segoe UI', sans-serif">Segoe UI (System Modern)</option>
                <option value="'Georgia', serif">Georgia (System Heritage)</option>
                <option value="'Times New Roman', serif">Times New Roman (Elite)</option>
                <option value="'Palatino', serif">Palatino (Book Classical)</option>
                <option value="'Arial', sans-serif">Arial (Clean Technical)</option>
                <option value="'Verdana', sans-serif">Verdana (Wide-Screen)</option>
                <option value="'Impact', sans-serif">Impact (High Impact)</option>
                <option value="'Courier New', monospace">Courier New (Data/Tech)</option>
                <option value="'Trebuchet MS', sans-serif">Trebuchet (Modern Dynamic)</option>
                <option value="'Tahoma', sans-serif">Tahoma (Solid Sans)</option>
            </select>
        </div>
        <div class="input-group"><label>Headline Font</label><select id="fH" class="uni-font" onchange="debounceRender()"></select></div>
        <div class="input-group"><label>Headline Color</label><input type="color" id="cH" value="#c5a059" oninput="debounceRender()"></div>
        <div class="input-group"><label>Headline Size (rem)</label><input type="number" id="sH" value="4.2" step="0.1" oninput="debounceRender()"></div>
        <div class="input-group"><label>Sub-Head Font</label><select id="fS" class="uni-font" onchange="debounceRender()"></select></div>
        <div class="input-group"><label>Sub Color</label><input type="color" id="cS" value="#c5a059" oninput="debounceRender()"></div>
        <div class="input-group"><label>Sub Size (rem)</label><input type="number" id="sS" value="1.8" step="0.1" oninput="debounceRender()"></div>
        <div class="input-group"><label>Body Color</label><input type="color" id="cB" value="#ffffff" oninput="debounceRender()"></div>
        <div class="input-group"><label>Body Size (Base)</label><input type="number" id="sB" value="2.0" step="0.1" oninput="debounceRender()"></div>
        <div class="input-group"><label>Line Height</label><input type="number" id="lhB" value="1.4" step="0.1" oninput="debounceRender()"></div>
        <div class="control-sep">4. PRESETS & ROYAL THEMES</div>
        <div class="preset-row" style="display:grid; grid-template-columns: repeat(4, 1fr); gap:5px; grid-column: 1/-1;">
            <button class="p-btn" onclick="preset('save', 1)">Save 1</button>
            <button class="p-btn" onclick="preset('save', 2)">Save 2</button>
            <button class="p-btn" onclick="preset('load', 1)">Load 1</button>
            <button class="p-btn" onclick="preset('load', 2)">Load 2</button>
        </div>
        <div class="input-group">
            <label>Royal Border Design</label>
            <select id="inTheme" onchange="debounceRender()">
                <option value="d_margin">Margin (Executive)</option>
                <option value="h_royal" selected>Royal Decree Frame</option>
                <option value="h_zari">NEW: Royal Zari Silk</option>
                <option value="h_durbar">NEW: Grand Durbar</option>
                <option value="h_mandala">NEW: Vedic Mandala</option>
                <option value="h_temple">Temple Arch</option>
                <option value="h_filigree">Double Filigree</option>
                <option value="h_silk">Silk Ridge</option>
                <option value="h_palace">Palace Pillar</option>
                <option value="h_copper">Copper Tamrapatra</option>
                <option value="h_parchment">Antique Paper</option>
                <option value="h_ivory">Ivory Carver</option>
                <option value="d_minimal">Modern Top-Bar</option>
                <option value="no_border">No Border</option>
            </select>
        </div>
        <div class="control-sep">5. CTA & BRANDING (GLASSMORPHISM)</div>
        <div class="input-group"><label>CTA Opacity (0-1)</label><input type="number" id="inCtaOpac" value="0.15" step="0.05" oninput="debounceRender()"></div>
        <div class="input-group"><label>CTA Blur (px)</label><input type="number" id="inCtaBlur" value="0" step="1" oninput="debounceRender()"></div>
        <div class="input-group"><label>Global CTA Text</label><textarea id="ctaVal" oninput="debounceRender()">RUN YOUR GOAL CALCULATOR ‚Üí</textarea></div>
        <div class="input-group"><label>CTA Size (rem)</label><input type="number" id="sCTA" value="1.1" step="0.1" oninput="debounceRender()"></div>
        <div class="input-group"><label>CTA BG Color</label><input type="color" id="inCtaBg" value="#1a243a" oninput="debounceRender()"></div>
        <div class="input-group"><label>CTA Text Color</label><input type="color" id="inCtaTxt" value="#ffffff" oninput="debounceRender()"></div>
        <div class="input-group"><label>Footnote Text</label><input type="text" id="brandVal" value="¬© 2026 KALPAKUBER INVESTMENTS" oninput="debounceRender()"></div>
        <div class="input-group"><label>Footnote Size (rem)</label><input type="number" id="sBrand" value="0.8" step="0.05" oninput="debounceRender()"></div>
        <div class="input-group"><label>Footnote Color</label><input type="color" id="cBrand" value="#c5a059" oninput="debounceRender()"></div>
        <div class="control-sep">6. GLOBAL HEADLINE & ALIGNMENT</div>
        <div class="input-group"><label>Main Headline</label><textarea id="inH1" oninput="debounceRender()">The Inflation Split.</textarea></div>
        <div class="input-group"><label>Sub-Head Hook</label><textarea id="inSub" oninput="debounceRender()">A Silent Retirement Killer.</textarea></div>
        <div class="input-group">
            <label>Alignment</label>
            <select id="inAlign" onchange="debounceRender()">
                <option value="left">Left</option>
                <option value="center" selected>Center</option>
                <option value="right">Right</option>
            </select>
        </div>
        <div class="input-group"><label>Base BG Color</label><input type="color" id="inColor" value="#021F2D" oninput="debounceRender()"></div>
       
        <div class="input-group"><label>BG Color Opacity (0.0-1.0)</label><input type="number" id="inBgOpac" value="1.0" step="0.05" oninput="debounceRender()"></div>
        <div class="input-group"><label>Watermark Opacity (0.0-0.4)</label><input type="number" id="inWaterOpac" value="0.07" step="0.01" oninput="debounceRender()"></div>
        <div class="input-group" style="background: rgba(197, 160, 89, 0.1); padding: 5px; border-radius: 4px;">
            <label>Gap: Headline to Subhead (px)</label>
            <input type="number" id="inGapHS" value="10" step="1" oninput="debounceRender()">
        </div>
        <div class="input-group" style="background: rgba(197, 160, 89, 0.1); padding: 5px; border-radius: 4px;">
            <label>Gap: Subhead to Body (px)</label>
            <input type="number" id="inGapSB" value="20" step="1" oninput="debounceRender()">
        </div>
       
        <div class="input-group">
            <label>Logo Upload</label>
            <input type="file" id="logoUpload" onchange="handleStaticImg(this, 'logo')">
            <button class="p-btn del-btn" onclick="clearImage('logo')">Clear Logo</button>
        </div>
        <div class="input-group">
            <label>Global BG Image</label>
            <input type="file" id="bgUpload" onchange="handleGlobalBg(this)">
            <button class="p-btn del-btn" onclick="clearImage('globalBg')">Clear Global BG</button>
        </div>
        <div class="input-group"><label>BG Image Opacity (0.0-1.0)</label><input type="number" id="bgOpacityInput" value="0.15" step="0.05" oninput="debounceRender()"></div>

        <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
             NEW SECTION ‚Äì COMPARISON MODE (added here)
             ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div class="control-sep">üîç COMPARISON MODE (A/B Testing)</div>
        <div class="input-group">
            <label>Enable Side-by-Side Comparison</label>
            <input type="checkbox" id="compareEnabled" onchange="toggleComparison()">
        </div>
        <div id="compareControls" style="display:none;">
            <div class="input-group">
                <label>Slide A (Left / Before)</label>
                <select id="compareA">
                    <option value="1">Slide 1</option>
                    <option value="2">Slide 2</option>
                    <option value="3" selected>Slide 3</option>
                    <option value="4">Slide 4</option>
                    <option value="5">Slide 5</option>
                </select>
            </div>
            <div class="input-group">
                <label>Slide B (Right / After)</label>
                <select id="compareB">
                    <option value="1">Slide 1</option>
                    <option value="2">Slide 2</option>
                    <option value="3">Slide 3</option>
                    <option value="4" selected>Slide 4</option>
                    <option value="5">Slide 5</option>
                </select>
            </div>
            <div class="input-group">
                <label>Before / After Split (drag handle)</label>
                <input type="range" id="splitPos" min="0" max="100" value="50" step="1" oninput="updateSplit(this.value)">
            </div>
        </div>

        <div class="control-sep">7. SLIDE CONTENT, TEMPLATES, WATERMARKS & OVERRIDES</div>
        <div id="slideConfigs"></div>
       
        <button class="sync-btn" onclick="render()">Build Evolution</button>
        <button class="sync-btn" onclick="exportAll(this)" style="background:#2563eb; color:white; margin-top:5px;">Download All PNGs</button>
    </div>
</div>
<div id="stage" class="stage"></div>

<!-- NEW comparison preview area -->
<div id="comparisonView" style="display:none; padding:40px 20px; text-align:center;">
    <h3 style="color:var(--gold); margin-bottom:20px;">Comparison View (A vs B)</h3>
    <div class="comparison-container" id="compareContainer"></div>
</div>

<div class="preview-phone"><div id="phone-slider"></div></div>
<div id="exportSandbox" class="export-sandbox" aria-hidden="true"></div>

    <div class="export-modal" id="exportModal" role="dialog" aria-live="polite" aria-atomic="true" aria-modal="true">
        <div class="modal-content" role="document">
            <div class="modal-title">Export in Progress</div>
            <div class="modal-status" id="exportStatus">Preparing...</div>
            <div class="modal-progress"><div class="modal-bar" id="exportProgressBar"></div></div>
            <div class="modal-actions">
                <button class="modal-btn cancel" onclick="cancelExport()">Cancel Export</button>
            </div>
        </div>
    </div>
    
    <script src="state.js"></script>
    <script src="ui-controls.js"></script>
    <script src="export.js"></script>
</body>
</html>
